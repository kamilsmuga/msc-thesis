\documentclass[]{final_report}
\usepackage{graphicx}
\usepackage{hyperref}
\usepackage[normalem]{ulem}
\usepackage{amsmath}
\usepackage{graphicx}
\usepackage{csvsimple}
\usepackage{float}

%%%%%%%%%%%%%%%%%%%%%%
%%% Project details
%%%%%%%%%%%%%%%%%%%%%%
\def\studentname{Kamil Smuga}
\def\projecttitle{An approach for Continuous Capacity Planning in Cloud Environments with an Uptime-based Pricing Model}
\def\supervisorname{Prof. Liam Murphy}
\def\moderatorname{Christina Thorpe}

\begin{document}

\maketitle
\tableofcontents\pdfbookmark[0]{Table of Contents}{toc}\newpage
\listoffigures\newpage
\par{\textbf{List of tables}}

%%%%
%The most important parts of your thesis are: abstract, introduction, conclusion and
%references. These are what get read first and make that vital initial impression.
%%%
%%%
%One of first things your examiners will look at is your literature review. If they see a
%good number of journal papers, a swathe of conference papers, a few recent workshop
%papers and not too many web sites, they’ll already be impressed.
%%%
%%%%%%%%%%%%%%%%%%%%%%
%%% ABSTRACT 
%%%%%%%%%%%%%%%%%%%%%%

\begin{abstract}

\emph{ /* To be revised. */} \par
\textsl{New Infrastructure as a Service solutions are becoming available with a growing number of supported pricing models. More often than not, a hosted Cloud environment is used to design and build an infrastructure for a product. The recent availability of different pricing schemes based on resource utilization and uptime reveals new challenges in already unpredictable capacity planning process. There is a choice between ad-hoc provisioning and upfront payments with reduced hourly rates. Reserved instances charged upfront are categorized into three groups: light, medium and heavy. Which one is better for a given utilization model? When exactly does one pricing scheme becomes more cost effective? Determining which machine type is better for a given utilization model, or at which point the cost effectiveness of a pricing scheme changes, is vital for the companies subscribing to the IaaS. }

\end{abstract}
\newpage

%%%%%%%%%%%%%%%%%%%%%%
%%% INTRODUCTION 
%%%%%%%%%%%%%%%%%%%%%%

\chapter{Introduction}

\emph{ /* Type of the project: The 'Big Idea' / proof by construction. */}

\section{Description of the problem}

\section{Motivation for solving the problem}

\section{Objectives}
This work aims to design an algorithm that answer IaaS consumer's price optimality questions and help to make adjustments based on uptime based charging per machine. 

\section{Related work}

\section{Challenges}

\section{Description of methodology}
Modelling and experimentation

\section{Structure of the Thesis}
\textbf{Background}. This section will outline the background information related to IaaS consumer challenges related to understanding the whole picture for price optimality of rented infrastructure. \par
\textbf{Design}. This section explains design and environment conditions for the algorithm to be useful. \par
\textbf{Implementation}. This sections explains algorithm implementation details and data analytics software that was used - Apache Spark~\cite{spark}. \par
\textbf{Evaluation}. The proposed algorithmic approach is applied on Google Trace data~\cite{googleTrace}. \par
\textbf{Conclusion and Further Work}. The completed data analysis is discussed. Further work related to algorithm improvements, automation and lessons learned are presented. 
 
\newpage

%%%%%%%%%%%%%%%%%%%%%%
%%% BACKGROUND 
%%%%%%%%%%%%%%%%%%%%%%

\chapter{Background}

\section{The Problem Domain}
\emph{/* Description of IaaS world - providers and consumers. */}
\subsection{IaaS consumer point of view}
\subsection{IaaS provider uptime-based pricing schemes}

\section{Motivation}
\emph{ /* Description of the problem - cloud based company runs a mix of software services (real-time streaming, batch, web and database servers) on common hardware. How do they know whether provisioned VMs run in the most optimal configuration? */ }

\section{Literature review}
\emph{/* Haven't found anything that would tackle this specific problem so far. Might mention the most research is done from IaaS provider perspective? This includes resource scheduling. My work can lead to cost-aware scheduler research */}

%good number of journal papers, a swathe of conference papers, a few recent workshop
%papers and not too many web sites


%%%%%%%%%%%%%%%%%%%%%%
%%% DESIGN 
%%%%%%%%%%%%%%%%%%%%%%

\chapter{Design}

\section{Taxonomy}

\subsection{Upfront cost}

Investment in compute resources comes with upfront cost. In case of physical machine it is hardware or lease cost. For virtual resources, IaaS providers offer per hour discounts for upfront charged schemes. \par
Upfront cost is considered to be one time payment and will be represented by \textit{u}. 

\subsection{Cost per hour}

Cost per hour represents a total cost of running a single machine divided by number of hours in calendar year. Aggregated cost is relatively easy to calculate in rented, virtualised environments. IaaS providers usually charge an X amount per hour. It might vary based on total uptime per month or pricing scheme. This number will be considered as a partial cost per hour and defined as \textit{pcph}. \par
Cost of running of physical hardware is less straightforward to calculate as it includes: power consumption, operations, hardware replacements cost, data center related costs and many others that may vary based on individual cases. Although more troublesome to calculate, cost per hour per host for physical infrastructure is possible to calculate. \par
Cost per hour will be defined as \textit{cph}. It includes upfront cost and IaaS provider per hour charges. It is defined as a function of hours of utilization per day.  

\begin{equation}
cph(h) = \frac{u + \sum_{i=1}^{366} pcph \times h}{365 \times h}
\end{equation}

\subsection{Intersection points between pricing schemes}

Cost per hour is calculated for each of available pricing schemes. Single result represents a matrix of hours per day and \textit{cph}. Graphical representation of results will produce a graph similar to Figure~\ref{fig:cc2_8xlarge}. Pricing trends are visible. Price drops exponentially for around first 5 hours of usage and almost stabilizes afterwards. Light is the cheapest option for around 15 hours per day usage. This is better visible on Figure~\ref{fig:cph_cc2_8xlarge_zoom}. After 15 hours, it is better to invest in Heavy utilization scheme. This is a point that will be called an intersection point between 2 pricing schemes and referred as \textit{ip(scheme1, scheme2)}. In this example, we can calculate that for cc2.8xlarge instance \textit{ip(light, heavy) = 16}

\begin{figure}[H]
	\includegraphics[width=\linewidth]{figures/cc2_8xlarge}
	\caption{\textit{cph} results for Amazon AWS cc2.8xlarge reserved instance for 1 year~\cite{AWS:2014}}
	\label{fig:cc2_8xlarge}
\end{figure}

\begin{figure}[H]
	\includegraphics[width=\linewidth]{figures/cph_cc2_8xlarge_zoom}
	\caption{Zoomed \textit{cph} results for Amazon AWS cc2.8xlarge reserved instance for 1 year~\cite{AWS:2014}}
	\label{fig:cph_cc2_8xlarge_zoom}
\end{figure}


\section{Algorithm}

\emph{/* High level design of the algorithm in pseudo-code? */}

\subsection{Calculate cost per hour for a given pricing scheme}
\subsection{Calculate intersection points to find out the best pricing scheme for a number of hours/day utilization}
\subsection{Collect VM usage data}
\subsection{Group usage metrics by machine}
\subsection{Calculate number of hours/day, distance from optimality points, CPU and memory utilization}
\subsection{Suggest changes to the least optimal VMs considering SLAs based on CPU and memory utilization}

%%%%%%%%%%%%%%%%%%%%%%
%%% IMPLEMENTATION 
%%%%%%%%%%%%%%%%%%%%%%

\chapter{Implementation}

\emph{/* Implementation quirks related to make it work. Mostly map/reduce jobs written for Apache Spark. */}

%%%%%%%%%%%%%%%%%%%%%%  
%%% EVALUATION!!!
%%% ALGORITHM TESTING  
%%% ON GOOGLE DATASET 
%%%%%%%%%%%%%%%%%%%%%%

\chapter{Evaluation}

\emph{/* Evaluation will go through each of Design stages and will perform necessary calculations. Some examples attached below. */}

\section{Methodology and setup description}

\section{Algorithm walkthrough}
\subsection{Calculate cost per hour for a given pricing scheme}
Results for ccs2.xlarge based on data published for AWS~\cite{AWS:2014} \par
\csvautotabular{out}
\subsection{Calculate intersection points to find out the best pricing scheme for a number of hours/day utilization}
%\includegraphics[width=\linewidth]{cph}
\subsection{Collect VM usage data}
\subsection{Group usage metrics by machine}
\subsection{Calculate number of hours/day, distance from optimality points, CPU and memory utilization}
\subsection{Suggest changes to the least optimal VMs considering SLAs based on CPU and memory utilization}

\section{Summary}

%%%%%%%%%%%%%%%%%%%%%%
%%% OPTIONAL!!!
%%% CAPACITY PLANNING 
%%% STRATEGIES    
%%%%%%%%%%%%%%%%%%%%%%

%\chapter{Capacity Planning Strategies}

%\section{Peak-to-mean ratio based resource assignment}

%\section{Only heavy instances}

%%%%%%%%%%%%%%%%%%%%%%
%%% CONCLUSION 
%%%%%%%%%%%%%%%%%%%%%%

\chapter{Conclusion and Future Work}

%%%%%%%%%%%%%%%%%%%%%%
%%% REFERENCES 
%%%%%%%%%%%%%%%%%%%%%%

\newpage
\begin{thebibliography}{99}
\bibitem{spark} https://spark.apache.org
\bibitem{googleTrace} https://code.google.com/p/googleclusterdata
\bibitem{AWS:2014} http://forecastcloudy.net/2012/04/02/amazon-web-services-aws-ec2-pricing-data/ https://a0.awsstatic.com/pricing/1/deprecated/ec2/ri-light-linux.json https://a0.awsstatic.com/pricing/1/deprecated/ec2/ri-medium-linux.json https://a0.awsstatic.com/pricing/1/deprecated/ec2/ri-heavy-linux.json
\end{thebibliography}
\label{endpage}

\end{document}

\end{article}